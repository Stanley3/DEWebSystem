<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zh.rest.dao.ZH_GuestDao">
	<sql id="guestColumns">guest_id, guest_name, guest_cellphone, guest_fixedline, area_address</sql>
	<select id="getGuestById" resultType="detialGuestInfo" >
		select 
		<include refid="guestColumns"/>
		from zh_guest left outer join zh_area on zh_guest.guest_area = zh_area.area_id
		where guest_id = #{id}
	</select>
	<select id="getGuests" resultType="detialGuestInfo">
		select 
		<include refid="guestColumns"/>
		from zh_guest left outer join zh_area on zh_guest.guest_area = zh_area.area_id		
	</select>
	<insert id="createGuest" parameterType="zh_guest">
		insert into zh_area values (#{guest_id}, #{guest_name}, #{guest_cellphone}, #{guest_fixedline}, #{guest_area})
	</insert>
	<update id="updateGuest" parameterType="zh_guest">
		update zh_area 
		set
		<if test="guest_name != null">
			guest_name = #{guest_name},
		</if>
		<if test="guest_cellphone != null">
			guest_cellphone = #{guest_cellphone},
		</if>
		<if test="guest_fixedline != null">
			guest_fixedline = #{guest_fixedline},
		</if>
		<if test="guest_area != null">
			guest_area = #{guest_area}
		</if>
	</update>
	<delete id="deleteGuestById">
		delete from zh_guest where guest_id = #{guest_id}
	</delete>
</mapper>